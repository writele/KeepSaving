@model KeepSaving.Models.Household
@{
    ViewBag.Title = "Dashboard";
}

<div class="row">
    <div class="col-md-4 content">
        <h3>Accounts</h3>
        @foreach(var account in Model.Accounts)
        {
            if (account.IsArchived == false)
            {
            <h4>@Html.ActionLink(account.Name, "Details", "Transactions", new { controller = "Transactions", action = "Details", id = account.Id}, new { id = account.Id })</h4>
            <h4>$@account.Balance</h4>
            <hr />
            }
        }
    </div>

    <div class="col-md-8" id="transactionsByMonth">
        <h3>Transactions By Month</h3>
        <div class="col-md-12" id="pieChart" style="height:300px; width:100%">

        </div>

    </div>
</div>
<div class="row">
    <div class="col-md-12" id="budgetsVsTransactions">


    </div>

</div>

@section Scripts {
    <script type="text/javascript" language="javascript" src="~/Scripts/canvasjs.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#pieChart').load('@Url.Action("_TransactionsByMonth", "Home", new { month = 6, year = 2016 })', function (response) {
               //response = response.replace(/"(\w+)"\s*:/g, '$1:');
               var chart = new CanvasJS.Chart("pieChart", {
                    data: [
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.
                        type: "pie",
                        dataPoints: $.parseJSON(response)
                    }
                    ]
               });
               chart.render();
               console.log(response);
            });
        });
    </script>
    <script src="~/Scripts/LoadPartials.js"></script>
}